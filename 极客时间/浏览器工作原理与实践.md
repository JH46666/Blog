#

##  进程与线程

理解什么是并行处理

多线程可以并行处理任务， 但是线程是不能够单独存在的， 它是由进程来启动和管理的。

一个进程就是一个程序的运行实例。详细解释就是，启动一个程序的时候，操作系统会为该程序创建一块内存，用来存放代码、运行中的数据和一个执行任务的主线程，我们把这样的一个运行环境叫进程

![线程](https://tva1.sinaimg.cn/large/0081Kckwgy1gll36lofrkj31nf0u0jxu.jpg)

**线程是依附于进程**的，而进程中使用多线程并行处理能提升运算效率。

总结： 

1. 进程中的任意一线程执行出错，都会导致整个进程的崩溃。
2. 线程之间共享进程中的数据。
![共享线程](https://tva1.sinaimg.cn/large/0081Kckwgy1gll3888ppyj316w0u0n4c.jpg)
线程 1、线程 2、线程 3 分别把执行的结果写入 A、B、C 中，然后线程 2 继续从 A、B、C 中读取数据，用来显示执行结果。

3. 当一个进程关闭之后，操作系统会回收进程所占用的内存。
4. 进程之间的内容相互隔离。
隔离是为了保护， 避免进程a写入数据到进程b的情况，间通信（ipc）的机制。

单进程浏览器时代
单进程浏览器是指浏览器的所有功能模块都是运行在同一个进程里，这些模块包含了网络、插件、JavaScript 运行环境、渲染引擎和页面等

分析出现的问题

1. 不稳定
渲染引擎模块也是不稳定的，通常一些复杂的 JavaScript 代码就有可能引起渲染引擎模块的崩溃。
2. 不流畅
所有页面的渲染模块、JavaScript 执行环境以及插件都是运行在同一个线程中的，这就意味着同一时刻只能有一个模块可以执行。

```js
function freeze() {
  while (1) {
    console.log("freeze");
  }
}
freeze();
```

浏览器中所有的页面都运行在该线程中，所以这些页面都没有机会去执行任务，这样就会导致整个浏览器失去响应，变卡顿。

页面的内存泄漏也是单进程变慢的一个重要原因。通常浏览器的内核都是非常复杂的，运行一个复杂点的页面再关闭页面，会存在内存不能完全回收的情况，这样导致的问题是使用时间越长，内存占用越高，浏览器会变得越慢。

3. 不安全

插件可以使用 C/C++ 等代码编写，通过插件可以获取到操作系统的任意资源，当你在页面运行一个插件时也就意味着这个插件能完全操作你的电脑。

## 多进程时代

![chrome](https://tva1.sinaimg.cn/large/0081Kckwgy1gll3notcpsj31b50u0jzv.jpg)

1. 解决不流畅
![](https://tva1.sinaimg.cn/large/0081Kckwgy1gll3notcpsj31b50u0jzv.jpg)
2. 解决不稳定








