# 过程

1. DNS 域名解析
2. 建立tcp连接
3. 发送 http 请求
4. 服务器处理请求
5. 返回响应结果
6. 关闭tcp连接
7. 浏览器解析html
8. 浏览器布局渲染

## 期间涉及到的缓存有哪些

dns: 从客户端到本地服务器属于递归查询， 而dns服务器之间的交互属于迭代查询。

建立tcp连接：三次握手原理 客户端发送syn标志的数据包给服务端，服务端收到后，回传一个带有syn/ack标志的数据包已示传达确认信息，最后客户端在回传一个带有ack标志的数据包，代表握手结束，连接成功。

发送http请求：与服务器建立连接后， 就向服务器发起请求了

服务器处理请求： 服务器收到请求后由web服务器处理请求，web服务器解析用户请求，知道了需要调度哪些资源文件，在通过相应的这些资源文件处理用户请求和参数，并调用数据库信息，最后将结果通过web服务器返回给浏览器客户端。

关闭TCP连接： 与创建tcp连接的三次我握手类似，关闭tcp连接，需要4次握手。

客户端： 我这边没有数据要给你了，关闭连接吧

服务端： 好的，我看我这边还有数据要传给吗

服务端： 我这边也没有数据要传给你了，咱们可以关闭连接了

客户端： 好的。

浏览器解析 html： 渲染树与dom树不同，渲染树中并没有head、display为none等不必显示的节点。

浏览器布局渲染： 根据css样式，即每个借点在页面中的大小和位置等。html 默认是流式布局，css 和 js 会打破这种布局。改变 dom 的外观样式以及大小和位置。这时就有两个重要概念： replaint 和 reflow。

replaint： 屏幕的一部分重画，不影响整体布局

reflow： 意味着元件的几何尺寸变了，我们需要重新验证并计算渲染树。

## dns 缓存

查询浏览器以及操作系统中的DNS缓存，再查询本地host文件，如果还未找到的话，就向自己的DNS服务器查询。

1. 浏览器搜索自身的dns缓存，
2. 搜索操作系统自身的dns缓存
3. 读取本地的hosts文件，查询有无域名对应解析
4. 浏览器发起的dns

### 浏览器缓存机制

查询浏览器中是否有对应网页的缓存（Expires或Cache-Control未过期），如果有缓存则直接使用缓存中的文件

## 301永久重定向

服务器一定要重定向而不是直接发送用户想看的网页呢，

1. 用不同地址会造成缓存友好性变差，当一个页面有好几个名字时， 它可能会在缓存里出现好几次
2. 搜索引擎排名有关，会将不同的地址带到同一个网站排名下。

## 本地存储

四个和缓存有关的
cache-control  相对时间   优先级高于expires

expires   绝对时间

last-modified  文件最后修改的时间 response从服务器返回的标记

if-modified-since  文件最后修改的时间 request 发送给服务器与服务器做对比，

### cdn缓存与回源

服务端渲染

